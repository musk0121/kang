<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中医体质辨识与养生系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #f8f0e3 0%, #e8dfca 100%);
            color: #5a3e36;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(90, 62, 54, 0.15);
            overflow: hidden;
            position: relative;
            border: 1px solid #e8d3b9;
        }
        
        header {
            background: linear-gradient(to right, #8e5e3c, #c99a6d);
            color: #fff;
            padding: 25px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .yin-yang {
            position: absolute;
            width: 100px;
            height: 100px;
            top: 15px;
            right: 20px;
            opacity: 0.2;
        }
        
        header h1 {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 3px;
        }
        
        header p {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .progress-container {
            background: #e8dfca;
            height: 8px;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: #c99a6d;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 0 4px 4px 0;
        }
        
        .content {
            padding: 30px;
            min-height: 500px;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        .welcome-page h2 {
            color: #8e5e3c;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
            position: relative;
            padding-bottom: 15px;
        }
        
        .welcome-page h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: #c99a6d;
            border-radius: 3px;
        }
        
        .welcome-page p {
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature {
            flex: 1;
            min-width: 200px;
            background: #f8f0e3;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            border: 1px solid #e8d3b9;
        }
        
        .feature:hover {
            transform: translateY(-5px);
        }
        
        .feature i {
            font-size: 2.5rem;
            color: #c99a6d;
            margin-bottom: 15px;
        }
        
        .feature h3 {
            color: #8e5e3c;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .question-page h3 {
            color: #8e5e3c;
            font-size: 1.5rem;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .options {
            display: grid;
            gap: 15px;
        }
        
        .option {
            background: #f8f0e3;
            border: 2px solid #e8dfca;
            border-radius: 12px;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background: #f0e5d0;
            border-color: #c99a6d;
        }
        
        .option.selected {
            background: #e8d3b9;
            border-color: #c99a6d;
            box-shadow: 0 0 0 3px rgba(201, 154, 109, 0.3);
        }
        
        .option input {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .option label {
            flex: 1;
            cursor: pointer;
            font-size: 1.05rem;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn {
            background: #8e5e3c;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 140px;
            font-family: 'Noto Serif SC', serif;
        }
        
        .btn:hover {
            background: #c99a6d;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(142, 94, 60, 0.3);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn-outline {
            background: transparent;
            color: #8e5e3c;
            border: 2px solid #8e5e3c;
        }
        
        .btn-outline:hover {
            background: #f8f0e3;
        }
        
        .result-page h2 {
            color: #8e5e3c;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2rem;
        }
        
        .result-card {
            background: linear-gradient(to bottom right, #f8f0e3, #e8dfca);
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 8px 20px rgba(90, 62, 54, 0.1);
            border-left: 5px solid #c99a6d;
            position: relative;
            overflow: hidden;
        }
        
        .result-card:before {
            content: "";
            position: absolute;
            top: -20px;
            right: -20px;
            width: 80px;
            height: 80px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,20 Q40,5 60,20 T100,20 Q85,40 100,60 T80,100 Q60,85 40,100 T0,80 Q15,60 0,40 T20,20" fill="none" stroke="%23c99a6d" stroke-width="2" opacity="0.3"/></svg>');
            background-size: contain;
            opacity: 0.1;
        }
        
        .result-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .result-title i {
            font-size: 2.2rem;
            color: #8e5e3c;
            margin-right: 15px;
        }
        
        .result-title h3 {
            font-size: 1.8rem;
            color: #5a3e36;
            font-family: 'Ma Shan Zheng', cursive;
            letter-spacing: 2px;
        }
        
        .result-content {
            padding: 15px 0;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .constitution-chart {
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
        }
        
        .health-advice {
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .advice-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #e8d3b9;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .advice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(142, 94, 60, 0.15);
        }
        
        .advice-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: #f8f0e3;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 28px;
            color: #c99a6d;
        }
        
        .advice-card h4 {
            color: #8e5e3c;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.4rem;
            position: relative;
            padding-bottom: 10px;
        }
        
        .advice-card h4:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: #c99a6d;
        }
        
        .advice-content {
            line-height: 1.8;
            font-size: 1.05rem;
        }
        
        .advice-content ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .advice-content li {
            margin-bottom: 8px;
        }
        
        .time-health {
            margin-top: 40px;
        }
        
        .time-health h3 {
            text-align: center;
            color: #8e5e3c;
            margin-bottom: 25px;
            font-size: 1.6rem;
            position: relative;
            font-family: 'Ma Shan Zheng', cursive;
        }
        
        .time-health h3:after {
            content: "";
            display: block;
            width: 100px;
            height: 2px;
            background: #c99a6d;
            margin: 10px auto;
        }
        
        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .time-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #e8d3b9;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .time-card.current {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(142, 94, 60, 0.15);
            border: 2px solid #c99a6d;
        }
        
        .time-card.current:before {
            content: "当前时辰";
            position: absolute;
            top: 10px;
            right: -25px;
            background: #c99a6d;
            color: white;
            padding: 3px 30px;
            font-size: 0.8rem;
            transform: rotate(45deg);
        }
        
        .time-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #f0e5d0;
        }
        
        .time-name {
            font-weight: bold;
            color: #8e5e3c;
            font-size: 1.3rem;
        }
        
        .time-range {
            background: #f8f0e3;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        .time-desc {
            margin-top: 10px;
            color: #5a3e36;
            line-height: 1.7;
        }
        
        .time-special {
            margin-top: 15px;
            padding: 10px;
            background: #fcf8f0;
            border-radius: 8px;
            border-left: 3px solid #c99a6d;
            font-style: italic;
        }
        
        .restart-btn {
            display: block;
            margin: 30px auto;
            text-align: center;
        }
        
        footer {
            text-align: center;
            padding: 25px 20px;
            background: #f8f0e3;
            color: #8e5e3c;
            font-size: 0.9rem;
            border-top: 1px solid #e8dfca;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 600px) {
            .container {
                border-radius: 15px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            header p {
                font-size: 1rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1rem;
                min-width: 120px;
            }
            
            .feature {
                min-width: 100%;
            }
            
            .result-title h3 {
                font-size: 1.5rem;
            }
            
            .time-grid, .health-advice {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <svg class="yin-yang" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="2.5"/>
                <path d="M50,5 a45,45 0 1,1 0,90 a22.5,22.5 0 1,0 0,-90" fill="none" stroke="#fff" stroke-width="2.5"/>
                <circle cx="50" cy="27.5" r="7.5" fill="#fff"/>
                <circle cx="50" cy="72.5" r="7.5" fill="#fff"/>
            </svg>
            <h1>中医体质辨识</h1>
            <p>结合十二时辰养生法，为您提供个性化健康指导</p>
        </header>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="content">
            <!-- 欢迎页面 -->
            <div class="page welcome-page active" id="welcomePage">
                <h2>了解体质，掌握健康之道</h2>
                <p>中医体质学将人体分为九大体质类型，不同体质在形态结构、生理功能及心理状态等方面各有特点。辨识体质可以更好地了解自己的身体状况，采取针对性的养生保健方法。</p>
                
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-check-circle"></i>
                        <h3>精准辨识</h3>
                        <p>多选题形式，更准确判断体质类型</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-clock"></i>
                        <h3>时辰养生</h3>
                        <p>结合中医十二时辰养生理论</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-leaf"></i>
                        <h3>个性建议</h3>
                        <p>根据体质提供专属健康方案</p>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <div></div>
                    <button class="btn" id="startBtn">
                        <i class="fas fa-play"></i> 开始测试
                    </button>
                </div>
            </div>
            
            <!-- 答题页面（动态生成） -->
            <div class="page" id="questionPage"></div>
            
            <!-- 结果页面 -->
            <div class="page result-page" id="resultPage">
                <h2>您的体质辨识结果</h2>
                
                <div class="result-card">
                    <div class="result-title">
                        <i class="fas fa-leaf"></i>
                        <h3 id="mainConstitution">平和体质</h3>
                    </div>
                    
                    <div class="result-content">
                        <p id="constitutionDesc">您属于平和体质，是健康的理想状态。阴阳气血调和，体态适中，面色红润，精力充沛，睡眠良好，二便正常，适应能力强。</p>
                    </div>
                    
                    <div class="constitution-chart">
                        <canvas id="constitutionChart"></canvas>
                    </div>
                    
                    <div class="health-advice">
                        <div class="advice-card">
                            <div class="advice-icon">
                                <i class="fas fa-utensils"></i>
                            </div>
                            <h4>饮食建议</h4>
                            <div class="advice-content" id="dietAdvice"></div>
                        </div>
                        
                        <div class="advice-card">
                            <div class="advice-icon">
                                <i class="fas fa-running"></i>
                            </div>
                            <h4>运动建议</h4>
                            <div class="advice-content" id="exerciseAdvice"></div>
                        </div>
                        
                        <div class="advice-card">
                            <div class="advice-icon">
                                <i class="fas fa-bed"></i>
                            </div>
                            <h4>生活建议</h4>
                            <div class="advice-content" id="lifestyleAdvice"></div>
                        </div>
                        
                        <div class="advice-card">
                            <div class="advice-icon">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <h4>特别调养</h4>
                            <div class="advice-content" id="specialAdvice"></div>
                        </div>
                    </div>
                </div>
                
                <div class="time-health">
                    <h3>十二时辰养生法</h3>
                    <p style="text-align: center; margin-bottom: 20px;">根据您的体质特点，以下时辰需特别注意：</p>
                    
                    <div class="time-grid" id="timeGrid">
                        <!-- 时辰养生内容动态生成 -->
                    </div>
                </div>
                
                <button class="btn restart-btn" id="restartBtn">
                    <i class="fas fa-redo"></i> 重新测试
                </button>
            </div>
        </div>
        
        <footer>
            <p>注：本测试结果仅供参考，不作为医疗诊断依据。如有健康问题，请咨询专业医师。</p>
            <p>© 2025 中医体质辨识 | 弘扬中医文化，传播健康知识</p>
        </footer>
    </div>

    <script>
        // 体质数据
        const constitutions = {
            "平和": { 
                desc: "您属于平和体质，是健康的理想状态。阴阳气血调和，体态适中，面色红润，精力充沛，睡眠良好，二便正常，适应能力强。",
                diet: `<p><strong>饮食原则：</strong>平衡膳食，五味调和</p>
                       <ul>
                         <li>主食以五谷杂粮为主，如小米、燕麦、糙米等</li>
                         <li>多食新鲜蔬菜水果，每日不少于500克</li>
                         <li>适量摄入优质蛋白，如鱼、禽、蛋、豆制品</li>
                         <li>少食油腻、辛辣、过甜或过咸食物</li>
                         <li>推荐食谱：山药粥、百合银耳羹、四神汤</li>
                       </ul>`,
                exercise: `<p><strong>运动原则：</strong>适度运动，动静结合</p>
                           <ul>
                             <li>每周进行3-5次中等强度运动，每次30-45分钟</li>
                             <li>推荐运动：太极拳、八段锦、散步、游泳</li>
                             <li>晨起可练习呼吸吐纳：深吸缓呼，每次10分钟</li>
                             <li>避免过度疲劳，运动后微汗为宜</li>
                           </ul>`,
                lifestyle: `<p><strong>生活调养：</strong>起居有常，情志平和</p>
                           <ul>
                             <li>保持规律作息，晚11点前入睡，早6点起床</li>
                             <li>培养兴趣爱好，如书法、园艺、茶道等</li>
                             <li>保持良好人际关系，避免情绪大起大落</li>
                             <li>四季养生：春踏青、夏避暑、秋登高、冬进补</li>
                           </ul>`,
                special: `<p><strong>特别提示：</strong>平和体质者重在维持现有平衡状态</p>
                          <ul>
                            <li>每季度进行3-7天轻断食，清理肠胃</li>
                            <li>春季可饮菊花枸杞茶，清肝明目</li>
                            <li>夏季适量饮用酸梅汤，生津止渴</li>
                            <li>秋冬季节可适当食用芝麻、核桃等滋补品</li>
                          </ul>`,
                color: 'rgba(201, 154, 109, 0.7)'
            },
            "气虚": { 
                desc: "您属于气虚体质，元气不足，常感疲乏、气短、自汗等。肌肉松软不实，声音低弱，易感冒，病后康复缓慢。",
                diet: `<p><strong>饮食原则：</strong>健脾益气，温补为主</p>
                       <ul>
                         <li>多食补气食物：山药、莲子、红枣、糯米、蜂蜜</li>
                         <li>推荐药膳：黄芪炖鸡、人参糯米粥、四君子汤</li>
                         <li>适量食用牛肉、鸡肉、鲫鱼等温补食材</li>
                         <li>忌食生冷寒凉食物，如西瓜、冷饮、苦瓜</li>
                         <li>烹饪方式以蒸、煮、炖为主，少油炸</li>
                       </ul>`,
                exercise: `<p><strong>运动原则：</strong>循序渐进，避免过劳</p>
                           <ul>
                             <li>选择低强度运动：散步、太极拳、瑜伽</li>
                             <li>每日晨起练习八段锦"双手托天理三焦"</li>
                             <li>每周3次，每次20-30分钟，微汗即止</li>
                             <li>避免剧烈运动、长时间跑步等耗气活动</li>
                             <li>运动后可按摩足三里、气海穴补气</li>
                           </ul>`,
                lifestyle: `<p><strong>生活调养：</strong>避免过劳，注意保暖</p>
                           <ul>
                             <li>保证充足睡眠，午间小憩30分钟</li>
                             <li>注意背部、腹部保暖，避免空调直吹</li>
                             <li>常按足三里、气海、关元等补气穴位</li>
                             <li>避免长时间讲话、大声喧哗</li>
                             <li>春季多晒太阳，提升阳气</li>
                           </ul>`,
                special: `<p><strong>特别调养：</strong>补中益气，固表防邪</p>
                          <ul>
                            <li>每日晨起含服3片红参，补气提神</li>
                            <li>常喝黄芪红枣茶：黄芪10g+红枣3颗</li>
                            <li>三伏天可进行艾灸：大椎、足三里等穴</li>
                            <li>换季时佩戴中药香囊，预防感冒</li>
                          </ul>`,
                color: 'rgba(142, 94, 60, 0.7)'
            },
            "阳虚": { 
                desc: "您属于阳虚体质，阳气不足，畏寒怕冷、手足不温等虚寒表现为主。肌肉松软不实，喜热饮食，精神不振。",
                diet: `<p><strong>饮食原则：</strong>温阳散寒，补肾助阳</p>
                       <ul>
                         <li>多食温热食物：羊肉、韭菜、核桃、生姜、肉桂</li>
                         <li>冬季进补：当归生姜羊肉汤、鹿茸炖鸡汤</li>
                         <li>常饮桂圆红枣茶、生姜红糖水</li>
                         <li>忌食生冷：冷饮、冰淇淋、生鱼片等</li>
                         <li>水果宜温热食用，如蒸苹果、烤橘子</li>
                       </ul>`,
                exercise: `<p><strong>运动原则：</strong>提升阳气，避寒就温</p>
                           <ul>
                             <li>选择阳光充足时户外运动：快走、太极拳</li>
                             <li>练习"五禽戏"中的熊戏，温补脾肾</li>
                             <li>每日晒背20分钟，最佳时间上午9-10点</li>
                             <li>避免游泳、潜水等水中运动</li>
                             <li>运动后及时擦干汗水，更换衣物</li>
                           </ul>`,
                lifestyle: `<p><strong>生活调养：</strong>保暖防寒，顾护阳气</p>
                           <ul>
                             <li>居住环境保持温暖，避免潮湿阴冷</li>
                             <li>冬季穿戴护腰、护膝，保护关键部位</li>
                             <li>每晚热水泡脚，水中可加艾叶、生姜</li>
                             <li>避免熬夜，晚上10点前入睡</li>
                             <li>冬季可使用暖宝宝贴于腰部</li>
                           </ul>`,
                special: `<p><strong>特别调养：</strong>温补肾阳，驱寒固本</p>
                          <ul>
                            <li>三伏天进行督脉灸，每年3-5次</li>
                            <li>常按肾俞、命门、关元等温阳穴位</li>
                            <li>冬季每日饮用一小杯温黄酒</li>
                            <li>晨起含服1片干姜，温中散寒</li>
                          </ul>`,
                color: 'rgba(92, 167, 186, 0.7)'
            },
            "阴虚": { 
                desc: "您属于阴虚体质，阴液亏少，口燥咽干、手足心热等虚热表现为主要特征。体形偏瘦，易口燥咽干，喜冷饮。",
                diet: `<p><strong>饮食原则：</strong>滋阴润燥，清热生津</p>
                       <ul>
                         <li>多食滋阴食物：银耳、百合、梨、荸荠、黑芝麻</li>
                         <li>推荐药膳：沙参玉竹老鸭汤、雪梨炖川贝</li>
                         <li>常饮石斛麦冬茶、菊花枸杞茶</li>
                         <li>忌食辛辣燥热：辣椒、花椒、羊肉、油炸食品</li>
                         <li>秋季多食莲藕、山药、蜂蜜等润燥食物</li>
                       </ul>`,
                exercise: `<p><strong>运动原则：</strong>舒缓柔和，避免耗津</p>
                           <ul>
                             <li>选择室内运动：瑜伽、太极、游泳</li>
                             <li>练习"六字诀"中的"嘘"字功，滋阴降火</li>
                             <li>避免高温下运动，防止大汗伤津</li>
                             <li>运动时间宜选早晚凉爽时段</li>
                             <li>运动后及时补充水分，可饮淡盐水</li>
                           </ul>`,
                lifestyle: `<p><strong>生活调养：</strong>养阴清热，避免耗伤</p>
                           <ul>
                             <li>居住环境保持湿润，可使用加湿器</li>
                             <li>避免熬夜，晚上11点前必须入睡</li>
                             <li>控制情绪，避免生气动怒</li>
                             <li>夏季避免长时间在空调环境</li>
                             <li>节制房事，避免耗伤肾阴</li>
                           </ul>`,
                special: `<p><strong>特别调养：</strong>滋补肾阴，清热润燥</p>
                          <ul>
                            <li>每晚睡前按摩三阴交、太溪穴</li>
                            <li>秋季进行沙疗，滋润肺阴</li>
                            <li>常饮五汁饮（梨、藕、荸荠、芦根、麦冬）</li>
                            <li>夏季午休30分钟，养心安神</li>
                          </ul>`,
                color: 'rgba(179, 139, 176, 0.7)'
            },
            "痰湿": { 
                desc: "您属于痰湿体质，痰湿凝聚，形体肥胖、腹部肥满、口黏苔腻等表现为主要特征。面部皮肤油脂较多，多汗且黏。",
                diet: `<p><strong>饮食原则：</strong>健脾祛湿，化痰利水</p>
                       <ul>
                         <li>多食利湿食物：薏米、红豆、冬瓜、荷叶、鲫鱼</li>
                         <li>推荐药膳：薏米红豆粥、冬瓜排骨汤</li>
                         <li>常饮陈皮普洱茶、山楂荷叶茶</li>
                         <li>忌食肥甘厚味：肥肉、奶油、甜点、油炸食品</li>
                         <li>晚餐少食，七分饱，睡前3小时不进食</li>
                       </ul>`,
                exercise: `<p><strong>运动原则：</strong>强度适中，出汗排湿</p>
                           <ul>
                             <li>坚持有氧运动：快走、慢跑、爬山、动感单车</li>
                             <li>每周5次以上，每次40-60分钟</li>
                             <li>练习"八段锦"中的"调理脾胃须单举"</li>
                             <li>运动至微微出汗，帮助排出湿气</li>
                             <li>避免运动后立即洗澡、吹空调</li>
                           </ul>`,
                lifestyle: `<p><strong>生活调养：</strong>远离潮湿，起居有常</p>
                           <ul>
                             <li>居住环境保持干燥通风，勤晒被褥</li>
                             <li>梅雨季节使用除湿机</li>
                             <li>衣着宽松透气，保持皮肤清洁</li>
                             <li>避免久坐，每小时起身活动5分钟</li>
                             <li>保持大便通畅，每日定时如厕</li>
                           </ul>`,
                special: `<p><strong>特别调养：</strong>化痰祛湿，健脾利水</p>
                          <ul>
                            <li>每日晨起空腹喝一杯生姜红枣茶</li>
                            <li>每周2次拔罐或刮痧，重点背部膀胱经</li>
                            <li>常按丰隆、足三里、阴陵泉等穴位</li>
                            <li>三伏天进行中药熏蒸，排出湿气</li>
                          </ul>`,
                color: 'rgba(155, 187, 89, 0.7)'
            }
        };

        // 题目数据（多选题）
        const questions = [
            {
                question: "您的身体有哪些感受？(可多选)",
                options: [
                    { text: "常年手脚冰凉，怕冷", constitution: "阳虚", score: 3 },
                    { text: "手心脚心发热，怕热", constitution: "阴虚", score: 3 },
                    { text: "身体沉重，容易疲劳", constitution: "痰湿", score: 3 },
                    { text: "气短懒言，容易出汗", constitution: "气虚", score: 3 },
                    { text: "精力充沛，适应力强", constitution: "平和", score: 3 },
                    { text: "面部油腻，易长痘痘", constitution: "痰湿", score: 2 }
                ]
            },
            {
                question: "您的饮食和二便情况？(可多选)",
                options: [
                    { text: "食欲好，不挑食", constitution: "平和", score: 3 },
                    { text: "容易腹胀，消化不良", constitution: "气虚", score: 3 },
                    { text: "喜欢冷饮，易便秘", constitution: "阴虚", score: 3 },
                    { text: "喜欢热饮，大便稀溏", constitution: "阳虚", score: 3 },
                    { text: "口中黏腻，大便黏马桶", constitution: "痰湿", score: 3 },
                    { text: "吃油腻食物易腹泻", constitution: "气虚", score: 2 }
                ]
            },
            {
                question: "您的精神状态如何？(可多选)",
                options: [
                    { text: "精力充沛，不易疲劳", constitution: "平和", score: 3 },
                    { text: "容易疲劳，气短心慌", constitution: "气虚", score: 3 },
                    { text: "畏寒喜暖，精神不振", constitution: "阳虚", score: 3 },
                    { text: "心烦易怒，失眠多梦", constitution: "阴虚", score: 3 },
                    { text: "头脑昏沉，嗜睡", constitution: "痰湿", score: 3 },
                    { text: "情绪稳定，心态平和", constitution: "平和", score: 2 }
                ]
            },
            {
                question: "您容易出现的健康问题？(可多选)",
                options: [
                    { text: "很少生病，恢复快", constitution: "平和", score: 3 },
                    { text: "容易感冒，病程长", constitution: "气虚", score: 3 },
                    { text: "关节冷痛，遇寒加重", constitution: "阳虚", score: 3 },
                    { text: "口舌生疮，咽喉干燥", constitution: "阴虚", score: 3 },
                    { text: "身体浮肿，痰多", constitution: "痰湿", score: 3 },
                    { text: "皮肤油腻，易长湿疹", constitution: "痰湿", score: 2 }
                ]
            }
        ];

        // 十二时辰养生数据
        const timeHealthData = [
            { name: "子时", range: "23:00-1:00", meridian: "胆经", desc: "万籁俱静宜入眠，此时阳气最弱，阴气最盛，应进入深度睡眠状态。", special: "此时不睡最伤胆，易致胆火上逆，引发失眠、头痛等症。" },
            { name: "丑时", range: "1:00-3:00", meridian: "肝经", desc: "肝脏排毒正当时，应处于熟睡状态，让肝脏完成代谢废物的工作。", special: "熬夜伤肝血，长期此时不睡会导致面色青灰，情志倦怠，易生肝病。" },
            { name: "寅时", range: "3:00-5:00", meridian: "肺经", desc: "深度睡眠养肺气，此时是肺经运行时段，需保持深度睡眠状态。", special: "此时易醒应注意肺气不足，可练习深呼吸以增强肺功能。" },
            { name: "卯时", range: "5:00-7:00", meridian: "大肠经", desc: "晨起排便清肠毒，起床后喝杯温水，促进肠道蠕动，排出废物。", special: "阳虚体质者此时应避免受寒，可饮用姜枣茶温阳。" },
            { name: "辰时", range: "7:00-9:00", meridian: "胃经", desc: "营养早餐养胃气，此时消化能力最强，应吃营养丰富的早餐。", special: "气虚体质者此时宜食粥类，如小米粥、山药粥等补气养胃。" },
            { name: "巳时", range: "9:00-11:00", meridian: "脾经", desc: "工作学习效率高，脾主运化，此时大脑活跃，适合处理重要工作。", special: "痰湿体质者此时宜活动身体，避免久坐加重湿气。" },
            { name: "午时", range: "11:00-13:00", meridian: "心经", desc: "午餐小憩养心神，午餐后小憩15-30分钟，有助于下午精力充沛。", special: "平和体质者此时小憩可增强免疫力，阴虚体质者应避免剧烈运动。" },
            { name: "未时", range: "13:00-15:00", meridian: "小肠经", desc: "消化吸收营养时，此时小肠活跃，应适量补充水分促进营养吸收。", special: "痰湿体质者此时应避免甜食，可饮普洱茶助消化。" },
            { name: "申时", range: "15:00-17:00", meridian: "膀胱经", desc: "多喝水利尿排毒，此时新陈代谢旺盛，应多喝水促进排毒。", special: "气虚体质者此时可进行轻度运动，如散步、太极等。" },
            { name: "酉时", range: "17:00-19:00", meridian: "肾经", desc: "休息养肾保元气，此时是肾经最旺时段，宜放松休息避免劳累。", special: "阳虚体质者此时应避免寒冷，阴虚体质者可适当补充水分。" },
            { name: "戌时", range: "19:00-21:00", meridian: "心包经", desc: "放松心情享休闲，此时宜进行轻松活动，如阅读、听音乐等。", special: "平和体质者可进行社交活动，气郁体质者应避免情绪波动。" },
            { name: "亥时", range: "21:00-23:00", meridian: "三焦经", desc: "准备入睡养百脉，此时应准备入睡，避免剧烈活动或情绪激动。", special: "阴虚体质者此时可泡脚助眠，阳虚体质者注意保暖。" }
        ];

        // 用户答案和当前题目索引
        let userAnswers = Array(questions.length).fill([]);
        let currentQuestionIndex = 0;
        let constitutionChart = null;
        
        // DOM元素
        const welcomePage = document.getElementById('welcomePage');
        const questionPage = document.getElementById('questionPage');
        const resultPage = document.getElementById('resultPage');
        const progressBar = document.getElementById('progressBar');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            startBtn.addEventListener('click', startQuiz);
            restartBtn.addEventListener('click', restartQuiz);
        });
        
        // 开始测试
        function startQuiz() {
            welcomePage.classList.remove('active');
            showQuestion(0);
            updateProgress();
        }
        
        // 显示题目
        function showQuestion(index) {
            currentQuestionIndex = index;
            questionPage.innerHTML = '';
            
            const question = questions[index];
            
            const questionHTML = `
                <h3>${index + 1}. ${question.question}</h3>
                <div class="options">
                    ${question.options.map((option, i) => `
                        <div class="option ${userAnswers[index].includes(i) ? 'selected' : ''}">
                            <input type="checkbox" id="option${index}-${i}" 
                                   ${userAnswers[index].includes(i) ? 'checked' : ''}
                                   data-index="${i}">
                            <label for="option${index}-${i}">${option.text}</label>
                        </div>
                    `).join('')}
                </div>
                <div class="nav-buttons">
                    ${index > 0 ? `<button class="btn btn-outline" id="prevBtn"><i class="fas fa-arrow-left"></i> 上一题</button>` : '<div></div>'}
                    <button class="btn" id="nextBtn">
                        ${index === questions.length - 1 ? '<i class="fas fa-check"></i> 提交答案' : '<i class="fas fa-arrow-right"></i> 下一题'}
                    </button>
                </div>
            `;
            
            questionPage.innerHTML = questionHTML;
            questionPage.classList.add('active');
            
            // 添加选项选择事件
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const optionIndex = parseInt(this.getAttribute('data-index'));
                    const currentAnswers = userAnswers[index];
                    
                    if (this.checked) {
                        // 如果选中，则添加
                        userAnswers[index] = [...currentAnswers, optionIndex];
                    } else {
                        // 如果取消选中，则移除
                        userAnswers[index] = currentAnswers.filter(i => i !== optionIndex);
                    }
                    
                    // 更新UI
                    const optionDiv = this.closest('.option');
                    optionDiv.classList.toggle('selected');
                });
            });
            
            // 添加导航按钮事件
            if (index > 0) {
                document.getElementById('prevBtn').addEventListener('click', () => {
                    showQuestion(index - 1);
                });
            }
            
            document.getElementById('nextBtn').addEventListener('click', () => {
                if (userAnswers[index].length === 0) {
                    alert('请至少选择一个选项');
                    return;
                }
                
                if (index < questions.length - 1) {
                    showQuestion(index + 1);
                } else {
                    calculateResult();
                }
                updateProgress();
            });
        }
        
        // 更新进度条
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // 计算体质结果
        function calculateResult() {
            // 初始化体质分数
            const scores = {
                "平和": 0,
                "气虚": 0,
                "阳虚": 0,
                "阴虚": 0,
                "痰湿": 0
            };
            
            // 计算每个体质的得分
            userAnswers.forEach((answerIndices, questionIndex) => {
                answerIndices.forEach(answerIndex => {
                    const option = questions[questionIndex].options[answerIndex];
                    scores[option.constitution] += option.score;
                });
            });
            
            // 找出主要体质（最高分）
            let mainConstitution = "平和";
            let mainScore = 0;
            
            for (const constitution in scores) {
                if (scores[constitution] > mainScore) {
                    mainConstitution = constitution;
                    mainScore = scores[constitution];
                }
            }
            
            // 显示结果
            showResult(mainConstitution, scores);
        }
        
        // 显示结果页面
        function showResult(mainConstitution, allScores) {
            questionPage.classList.remove('active');
            resultPage.classList.add('active');
            
            // 更新主要体质信息
            document.getElementById('mainConstitution').textContent = mainConstitution + "体质";
            document.getElementById('constitutionDesc').textContent = constitutions[mainConstitution].desc;
            document.getElementById('dietAdvice').innerHTML = constitutions[mainConstitution].diet;
            document.getElementById('exerciseAdvice').innerHTML = constitutions[mainConstitution].exercise;
            document.getElementById('lifestyleAdvice').innerHTML = constitutions[mainConstitution].lifestyle;
            document.getElementById('specialAdvice').innerHTML = constitutions[mainConstitution].special;
            
            // 创建体质得分雷达图
            createConstitutionChart(allScores, mainConstitution);
            
            // 生成十二时辰养生内容
            generateTimeHealthGrid(mainConstitution);
            
            // 更新进度条为100%
            progressBar.style.width = '100%';
        }
        
        // 创建体质得分雷达图
        function createConstitutionChart(scores, mainConstitution) {
            const ctx = document.getElementById('constitutionChart').getContext('2d');
            
            // 销毁之前的图表实例
            if (constitutionChart) {
                constitutionChart.destroy();
            }
            
            const labels = Object.keys(scores);
            const data = Object.values(scores);
            const backgroundColors = labels.map(constitution => {
                return constitution === mainConstitution 
                    ? constitutions[constitution].color 
                    : 'rgba(200, 200, 200, 0.2)';
            });
            
            constitutionChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '体质分布',
                        data: data,
                        backgroundColor: 'rgba(142, 94, 60, 0.1)',
                        borderColor: '#8e5e3c',
                        borderWidth: 2,
                        pointBackgroundColor: '#8e5e3c',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#8e5e3c',
                        pointRadius: 4
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                display: true,
                                color: 'rgba(142, 94, 60, 0.1)'
                            },
                            grid: {
                                color: 'rgba(142, 94, 60, 0.1)'
                            },
                            pointLabels: {
                                font: {
                                    size: 12,
                                    family: "'Noto Serif SC', serif"
                                },
                                color: '#5a3e36'
                            },
                            ticks: {
                                display: false,
                                stepSize: 5
                            },
                            min: 0,
                            suggestedMax: Math.max(...data) + 5
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // 生成十二时辰养生内容
        function generateTimeHealthGrid(mainConstitution) {
            const gridContainer = document.getElementById('timeGrid');
            gridContainer.innerHTML = '';
            
            // 获取当前时间
            const now = new Date();
            const currentHour = now.getHours();
            
            timeHealthData.forEach(time => {
                // 解析时辰范围
                const [start, end] = time.range.split('-').map(t => {
                    const [hourStr] = t.split(':');
                    return parseInt(hourStr);
                });
                
                // 判断是否为当前时辰
                const isCurrent = currentHour >= start && currentHour < end;
                
                const timeCard = document.createElement('div');
                timeCard.className = `time-card ${isCurrent ? 'current' : ''}`;
                timeCard.innerHTML = `
                    <div class="time-header">
                        <div class="time-name">${time.name}（${time.meridian}）</div>
                        <div class="time-range">${time.range}</div>
                    </div>
                    <div class="time-desc">${time.desc}</div>
                    <div class="time-special">
                        <strong>${mainConstitution}体质注意：</strong>${time.special}
                    </div>
                `;
                gridContainer.appendChild(timeCard);
            });
        }
        
        // 重新开始测试
        function restartQuiz() {
            // 重置状态
            userAnswers = Array(questions.length).fill([]);
            currentQuestionIndex = 0;
            
            // 销毁图表
            if (constitutionChart) {
                constitutionChart.destroy();
                constitutionChart = null;
            }
            
            // 隐藏结果页，显示欢迎页
            resultPage.classList.remove('active');
            welcomePage.classList.add('active');
            
            // 重置进度条
            progressBar.style.width = '0%';
        }
    </script>
</body>
</html>
